<div class="loading"
     ng-if="customer.finalSourceLoading">
    <img src="assets/img/loading.gif"
         alt="loading-img">
    <div class="loading-msg">Sourcing please wait.... </div>
</div>
<div class="page-header">
    <h1 class="title">Source Now</h1>
    <div ng-if="customer.sourceNowTab == 'PassedProducts'">
        <div class="page-sub-header"
             ng-if="successList.length == $root.total">
            <h2 class="product_label">Whole of the Market Products</h2>
        </div>
        <div class="page-sub-header"
             ng-if="successList.length != $root.total">
            <h2 class="product_label">Filtered Market Products</h2>
        </div>
    </div>
    <div ng-if="customer.sourceNowTab == 'FailedProducts'">
        <div class="page-sub-header"
             ng-if="failedList.length == $root.total">
            <h2 class="product_label">Whole of the Market Failed Products</h2>
        </div>
        <div class="page-sub-header"
             ng-if="failedList.length != $root.total">
            <h2 class="product_label">Filtered Market Failed Products</h2>
        </div>
    </div>
</div>
<div class="container-widget">
    <div class="row">
        <div class="col-md-12 col-lg-12">
            <div class="panel panel-transparent padding-0">
                <div class="panel-body">
                    <div role="tabpanel">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs"
                            role="tablist">
                            <li role="presentation"
                                ng-class="{'active' : getActiveSourceNowTab('PassedProducts')}">
                                <a href="javascript:void(0)"
                                   ng-click="setSourceNowTab('PassedProducts')"
                                   data-toggle="tab">Passed Products ( {{successList.length}} )</a>
                            </li>
                            <li role="presentation"
                                ng-class="{'active' : getActiveSourceNowTab('FailedProducts')}">
                                <a href="javascript:void(0)"
                                   ng-click="setSourceNowTab('FailedProducts')"
                                   data-toggle="tab">Failed Products ( {{failedList.length}} )</a>
                            </li>
                            <li role="presentation"
                                ng-class="{'active' : getActiveSourceNowTab('ShortlistedProducts')}">
                                <a href="javascript:void(0)"
                                   ng-click="setSourceNowTab('ShortlistedProducts')"
                                   data-toggle="tab">Shortlisted Products</a>
                            </li>
                        </ul>
                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel"
                                 class="tab-pane"
                                 ng-class="{'active' : getActiveSourceNowTab('PassedProducts')}">
                                <div class="row padding-0 soruceNowDiv">
                                    <div class="col-md-3 FilterCol">
                                        <div class="col-md-12 padding-0 margin-b-10"
                                             ng-if="customer.showLenderFinalSourcetoClient">
                                            <div class="filter-header">Filter Product By Lender
                                                <i class="fa fa-refresh float-r pointer-arrow"
                                                   ng-click="customer.sourcesuccessFilter = {}; changeFilter();"></i>
                                            </div>
                                            <div class="filter-body">
                                                <ui-select dropdownenter
                                                           ng-model="customer.sourcesuccessFilter.LenderName"
                                                           ng-change="changeFilter()">
                                                    <ui-select-match allow-clear="true"
                                                                     placeholder="Please Select">{{$select.selected}}</ui-select-match>
                                                    <ui-select-choices repeat="value as value in lenderList| filter:$select.search">
                                                        <div ng-bind-html="value | highlight: $select.search"></div>
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>
                                        </div>
                                        <div class="col-md-12 padding-0 margin-b-10">
                                            <div class="filter-header">Rates</div>
                                            <div class="filter-body col-md-12">
                                                <div class="col-md-6 ">
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox1"
                                                               type="checkbox"
                                                               checklist-value="'Fix'"
                                                               checklist-model="customer.sourcesuccessFilter.ProductType"
                                                               ng-disabled="disableProductType('fix')"
                                                               ng-change="changeFilter()">
                                                        <label for="checkbox1"> Fixed </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox2"
                                                               type="checkbox"
                                                               checklist-value="'disc'"
                                                               checklist-model="customer.sourcesuccessFilter.ProductType"
                                                               ng-disabled="disableProductType('disc')"
                                                               ng-change="changeFilter()">
                                                        <label for="checkbox2"> Discounted </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox3"
                                                               type="checkbox"
                                                               checklist-value="'Track'"
                                                               checklist-model="customer.sourcesuccessFilter.ProductType"
                                                               ng-disabled="disableProductType('Track')"
                                                               ng-change="changeFilter()">
                                                        <label for="checkbox3"> Tracker </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox4"
                                                               type="checkbox"
                                                               checklist-value="'Capped'"
                                                               checklist-model="customer.sourcesuccessFilter.ProductType"
                                                               ng-disabled="disableProductType('Capped')"
                                                               ng-change="changeFilter()">
                                                        <label for="checkbox4"> Capped </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox5"
                                                               type="checkbox"
                                                               checklist-value="'Var'"
                                                               checklist-model="customer.sourcesuccessFilter.ProductType"
                                                               ng-disabled="disableProductType('Var')"
                                                               ng-change="changeFilter()">
                                                        <label for="checkbox5"> Variable </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox11"
                                                               type="checkbox"
                                                               checklist-value="'1 Years'"
                                                               checklist-model="customer.sourcesuccessFilter.Term"
                                                               ng-disabled="disableTerm('1 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="checkbox11"> 1 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox12"
                                                               type="checkbox"
                                                               checklist-value="'2 Years'"
                                                               checklist-model="customer.sourcesuccessFilter.Term"
                                                               ng-disabled="disableTerm('2 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="checkbox12"> 2 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox13"
                                                               type="checkbox"
                                                               checklist-value="'3 Years'"
                                                               checklist-model="customer.sourcesuccessFilter.Term"
                                                               ng-disabled="disableTerm('3 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="checkbox13"> 3 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="checkbox14"
                                                               type="checkbox"
                                                               checklist-value="'5 Years'"
                                                               checklist-model="customer.sourcesuccessFilter.Term"
                                                               ng-disabled="disableTerm('5 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="checkbox14"> 5 Year </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 padding-0 margin-b-10">
                                            <div class="filter-header">Choose My Mortgage</div>
                                            <div class="filter-body">Interest Calculation Method
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter1"
                                                           type="checkbox"
                                                           checklist-value="'Offset'"
                                                           checklist-model="customer.sourcesuccessFilter.ProductName"
                                                           ng-change="changeFilter()">
                                                    <label for="filter1"> Offset Mortgages </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter2"
                                                           type="checkbox"
                                                           checklist-value="'Not Allowed'"
                                                           checklist-model="customer.sourcesuccessFilter.Overpayments"
                                                           ng-change="changeFilter()">
                                                    <label for="filter2"> Overpayment Facility </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter3"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcesuccessFilter.BookingFee"
                                                           ng-change="changeFilter()">
                                                    <label for="filter3"> No Booking Fee </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter4"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcesuccessFilter.ArrangementFee"
                                                           ng-change="changeFilter()">
                                                    <label for="filter4"> No Arrangement Fee </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter5"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcesuccessFilter.HLC"
                                                           ng-change="changeFilter()">
                                                    <label for="filter5"> No Higher Lending Charge </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter6"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcesuccessFilter.Cashback"
                                                           ng-change="changeFilter()">
                                                    <label for="filter6"> Cash back Required </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter9"
                                                           type="checkbox"
                                                           checklist-value="'Free Legal'"
                                                           checklist-model="customer.sourcesuccessFilter.Incentives"
                                                           ng-change="changeFilter()">
                                                    <label for="filter9"> Free Legal </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter7"
                                                           type="checkbox"
                                                           checklist-value="'(none)'"
                                                           checklist-model="customer.sourcesuccessFilter.ERC"
                                                           ng-change="changeFilter()">
                                                    <label for="filter7"> No Early Repayment Charges </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="filter8"
                                                           type="checkbox"
                                                           checklist-value="'0'"
                                                           checklist-model="customer.sourcesuccessFilter.ERCOverHang"
                                                           ng-change="changeFilter()">
                                                    <label for="filter8"> No Early Repayment Charge Overhang </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-9 DataCol"
                                         ng-if="successList && successList.length">
                                        <div class="col-sm-12 margin-b-10">
                                            <div class="col-sm-6 padding-0">
                                                <p style="font-weight:600;">Please select maximum 5 products from the list to compare</p>
                                            </div>
                                            <div class="col-sm-2">
                                                <span>
                                                    <span class="box"
                                                          ng-class="{boxcolor: shortListProduct.length > 0 }">1 </span>
                                                    <span class="box"
                                                          ng-class="{boxcolor: shortListProduct.length > 1}">2 </span>
                                                    <span class="box"
                                                          ng-class="{boxcolor: shortListProduct.length > 2}">3 </span>
                                                    <span class="box"
                                                          ng-class="{boxcolor: shortListProduct.length  > 3}">4 </span>
                                                    <span class="box"
                                                          ng-class="{boxcolor: shortListProduct.length  > 4}">5</span>
                                                </span>
                                            </div>
                                            <div class="col-sm-4">
                                                <button class="btn btn-sm btn-primary float-r"
                                                        ng-click="clearShortList();">Clear Shortlist</button>
                                                <button class="btn btn-sm btn-default float-r margin-r-10"
                                            
                                                        ng-click="updateShortList();">Update Shortlist</button>
                                            </div>
                                        </div>
                                        <div>
                                            <dir-pagination-controls boundary-links="true"
                                                                     pagination-id="original"
                                                                     on-page-change="pageChangeHandler(newPageNumber)"
                                                                     template-url="app/directives/dirPagination/dirPagination.tpl.html"></dir-pagination-controls>
                                            <table class="table table-hover table-bordered">
                                                <thead>
                                                    <tr>
                                                        <td class="text-center"> </td>
                                                        <td ng-if="customer.showLenderFinalSourcetoClient">Lender Name</td>
                                                        <td>Product Description</td>
                                                        <td>Term</td>
                                                        <td>Rate</td>
                                                        <td>Initial Payment</td>
                                                        <td>Rev. Rate</td>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr dir-paginate="product in filtered = successList| filterMultiple: { LenderName : customer.sourcesuccessFilter.LenderName}| filterMultiple: {Term: customer.sourcesuccessFilter.Term}|filterMultiple: {ProductType: customer.sourcesuccessFilter.ProductType}|
                                                    filterMultiple: {BookingFee : customer.sourcesuccessFilter.BookingFee}|filterMultiple: {ArrangementFee : customer.sourcesuccessFilter.ArrangementFee}|filterMultiple: {ERCOverHang : customer.sourcesuccessFilter.ERCOverHang}|filterMultiple: {ERC : customer.sourcesuccessFilter.ERC}|
                                                    filterMultiple: {HLC : customer.sourcesuccessFilter.HLC}|filterMultiple: {Incentives : customer.sourcesuccessFilter.Incentives}|filterMultiple: {ProductName : customer.sourcesuccessFilter.ProductName}|filterMultiple: {Overpayments : customer.sourcesuccessFilter.Overpayments}| itemsPerPage: pageSize: 'original'"
                                                
                                                        current-page="currentPage"
                                                        pagination-id="original">
                                                        <!-- <tr dir-paginate="product in filtered = successList| filterMultiple: { LenderName : customer.sourcesuccessFilter.LenderName} | itemsPerPage: pageSize: 'original'" current-page="currentPage" pagination-id="original"> -->
                                                        <td class="text-center">
                                                            <div class="checkbox checkbox-primary margin-t-0">
                                                                <input enter
                                                                       id="product_{{$index + '_' + product.LenderName}}"
                                                                       ng-model="product.isCheck"
                                                                       ng-true-value="true"
                                                                       ng-false-value="false"
                                                                       type="checkbox"
                                                                       ng-change="checkList(product)">
                                                                <label for="product_{{$index + '_' + product.LenderName}}">Compare</label>
                                                            </div>
                                                        </td>
                                                        <td ng-if="customer.showLenderFinalSourcetoClient">{{product.LenderName}}</td>
                                                        <td>{{product.ProductName}}</td>
                                                        <td>{{product.Term}}</td>
                                                        <td>{{product.LenderRate}}</td>
                                                        <td>{{product.InitialPayment}}</td>
                                                        <td>{{product.RevertionRate}}</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <button type="button"
                                            class="btn scroll-top"
                                            ng-click="backButtonAction();">Back</button>
                                    <button type="button"
                                            class="btn btn-primary scroll-top"
                                            ng-click="nextButtonAction();">Next</button>
                                </div>
                            </div>
                            <div role="tabpanel"
                                 class="tab-pane"
                                 ng-class="{'active' : getActiveSourceNowTab('FailedProducts')}">
                                <div class="row padding-0 soruceNowDiv"
                                     ng-if="getActiveSourceNowTab('FailedProducts')">
                                    <div class="col-md-3 FilterCol">
                                        <div class="col-md-12 padding-0 margin-b-10">
                                            <div class="filter-header">Failed Reasons </div>
                                            <div class="filter-body col-sm-12 padding-0">
                                                <div class="col-sm-12 failed-product-row"
                                                     ng-repeat="reason in failedResons"
                                                     ng-click="moveback(reason)">
                                                    <div class="col-sm-9 padding-l-0">
                                                        <p class="font-600 margin-b-0">{{reason}}</p>
                                                    </div>
                                                    <div class="col-sm-3 padding-r-0">
                                                        <p class="float-r margin-b-0">{{getFiledLength(reason)}}</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 padding-0 margin-b-10"
                                             ng-if="customer.showLenderFinalSourcetoClient">
                                            <div class="filter-header">Filter Product By Lender
                                                <i class="fa fa-refresh float-r pointer-arrow"
                                                   ng-click="customer.sourcefailedFilter = {}; changeFilter();"></i>
                                            </div>
                                            <div class="filter-body">
                                                <ui-select dropdownenter
                                                           ng-model="customer.sourcefailedFilter.LenderName"
                                                           ng-change="changeFilter()">
                                                    <ui-select-match allow-clear="true"
                                                                     placeholder="Please Select">{{$select.selected}}</ui-select-match>
                                                    <ui-select-choices repeat="value as value in failedLenderList| filter:$select.search">
                                                        <div ng-bind-html="value | highlight: $select.search"></div>
                                                    </ui-select-choices>
                                                </ui-select>
                                            </div>
                                        </div>
                                        <div class="col-md-12 padding-0 margin-b-10">
                                            <div class="filter-header">Rates</div>
                                            <div class="filter-body col-md-12">
                                                <div class="col-md-6 ">
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate1"
                                                               type="checkbox"
                                                               checklist-value="'Fix'"
                                                               checklist-model="customer.sourcefailedFilter.ProductType"
                                                               ng-disabled="disableFailedProductType('fix')"
                                                               ng-change="changeFilter()">
                                                        <label for="failed_rate1"> Fixed </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate2"
                                                               type="checkbox"
                                                               checklist-value="'disc'"
                                                               checklist-model="customer.sourcefailedFilter.ProductType"
                                                               ng-disabled="disableFailedProductType('disc')"
                                                               ng-change="changeFilter()">
                                                        <label for="failed_rate2"> Discounted </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate3"
                                                               type="checkbox"
                                                               checklist-value="'Track'"
                                                               checklist-model="customer.sourcefailedFilter.ProductType"
                                                               ng-disabled="disableFailedProductType('Track')"
                                                               ng-change="changeFilter()">
                                                        <label for="failed_rate3"> Tracker </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate4"
                                                               type="checkbox"
                                                               checklist-value="'Capped'"
                                                               checklist-model="customer.sourcefailedFilter.ProductType"
                                                               ng-disabled="disableFailedProductType('Capped')"
                                                               ng-change="changeFilter()">
                                                        <label for="failed_rate4"> Capped </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate5"
                                                               type="checkbox"
                                                               checklist-value="'Var'"
                                                               checklist-model="customer.sourcefailedFilter.ProductType"
                                                               ng-disabled="disableFailedProductType('Var')"
                                                               ng-change="changeFilter()">
                                                        <label for="failed_rate5"> Variable </label>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate6"
                                                               type="checkbox"
                                                               checklist-value="'1 Years'"
                                                               checklist-model="customer.sourcefailedFilter.Term"
                                                               ng-disabled="disableFailedTerm('1 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="failed_rate6"> 1 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate7"
                                                               type="checkbox"
                                                               checklist-value="'2 Years'"
                                                               checklist-model="customer.sourcefailedFilter.Term"
                                                               ng-disabled="disableFailedTerm('2 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="failed_rate7"> 2 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate8"
                                                               type="checkbox"
                                                               checklist-value="'3 Years'"
                                                               checklist-model="customer.sourcefailedFilter.Term"
                                                               ng-disabled="disableFailedTerm('3 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="failed_rate8"> 3 Year </label>
                                                    </div>
                                                    <div class="checkbox checkbox-primary">
                                                        <input enter
                                                               id="failed_rate9"
                                                               type="checkbox"
                                                               checklist-value="'5 Years'"
                                                               checklist-model="customer.sourcefailedFilter.Term"
                                                               ng-disabled="disableFailedTerm('5 Year')"
                                                               ng-change="changeFilter()" />
                                                        <label for="failed_rate9"> 5 Year </label>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col-md-12 padding-0 margin-b-10">
                                            <div class="filter-header">Choose My Mortgage</div>
                                            <div class="filter-body">Interest Calculation Method
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter1"
                                                           type="checkbox"
                                                           checklist-value="'Offset'"
                                                           checklist-model="customer.sourcefailedFilter.ProductName"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter1"> Offset Mortgages </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter2"
                                                           type="checkbox"
                                                           checklist-value="'Not Allowed'"
                                                           checklist-model="customer.sourcefailedFilter.Overpayments"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter2"> Overpayment Facility </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter3"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcefailedFilter.BookingFee"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter3"> No Booking Fee </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter4"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcefailedFilter.ArrangementFee"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter4"> No Arrangement Fee </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter5"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcefailedFilter.HLC"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter5"> No Higher Lending Charge </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter6"
                                                           type="checkbox"
                                                           checklist-value="'£0'"
                                                           checklist-model="customer.sourcefailedFilter.Cashback"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter6"> Cash back Required </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter7"
                                                           type="checkbox"
                                                           checklist-value="'Free Legal'"
                                                           checklist-model="customer.sourcefailedFilter.Incentives"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter7"> Free Legal </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter8"
                                                           type="checkbox"
                                                           checklist-value="'(none)'"
                                                           checklist-model="customer.sourcefailedFilter.ERC"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter8"> No Early Repayment Charges </label>
                                                </div>
                                                <div class="checkbox checkbox-primary">
                                                    <input enter
                                                           id="failed_filter9"
                                                           type="checkbox"
                                                           checklist-value="'0'"
                                                           checklist-model="customer.sourcefailedFilter.ERCOverHang"
                                                           ng-change="changeFilter()">
                                                    <label for="failed_filter9"> No Early Repayment Charge Overhang </label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-9 DataCol"
                                         ng-if="failedList && failedList.length">
                                        <dir-pagination-controls boundary-links="true"
                                                                 pagination-id="copy"
                                                                 on-page-change="pageChangeHandler(newPageNumber)"
                                                                 template-url="app/directives/dirPagination/dirPagination.tpl.html"></dir-pagination-controls>
                                        <table class="table table-hover table-bordered">
                                            <thead>
                                                <tr>
                                                    <td>Product Name</td>
                                                    <td ng-if="customer.showLenderFinalSourcetoClient">Lender Name</td>
                                                    <td>Term</td>
                                                    <td>Rate</td>
                                                    <td>Max LTV Payment</td>
                                                    <td>Rejection Reason</td>
                                                    <td>Product Type</td>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <!--                                                <tr ng-repeat="product in failedList">-->
                                                <tr dir-paginate="product in filtered = failedList| filterMultiple: { LenderName : customer.sourcefailedFilter.LenderName}| filterMultiple: {Term: customer.sourcefailedFilter.Term}|filterMultiple: {ProductType: customer.sourcefailedFilter.ProductType}|
                                                    filterMultiple: {BookingFee : customer.sourcefailedFilter.BookingFee}|filterMultiple: {ArrangementFee : customer.sourcefailedFilter.ArrangementFee}|filterMultiple: {ERCOverHang : customer.sourcefailedFilter.ERCOverHang}|filterMultiple: {ERC : customer.sourcefailedFilter.ERC}|
                                                   filterMultiple: {HLC : customer.sourcefailedFilter.HLC}|filterMultiple: {Incentives : customer.sourcefailedFilter.Incentives}|filterMultiple: {ProductName : customer.sourcefailedFilter.ProductName}|filterMultiple: {Overpayments : customer.sourcefailedFilter.Overpayments}| itemsPerPage: pageSize: 'copy'"
                                            
                                                    pagination-id="copy">
                                                    <td>{{product.ProductName}}</td>
                                                    <td ng-if="customer.showLenderFinalSourcetoClient">{{product.LenderName}}</td>
                                                    <td>{{product.Term}}</td>
                                                    <td>{{product.LenderRate}}</td>
                                                    <td>{{product.MaxLTV}}</td>
                                                    <td>{{product.FailureReason}}</td>
                                                    <td>{{product.ProductType}}</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="row">
                                    <button type="button"
                                            class="btn scroll-top"
                                            ng-click="backButtonAction();">Back</button>
                                    <button type="button"
                                            class="btn btn-primary scroll-top"
                                            ng-click="nextButtonAction();">Next</button>
                                </div>
                            </div>
                            <div role="tabpanel"
                                 class="tab-pane"
                                 ng-class="{'active' : getActiveSourceNowTab('ShortlistedProducts')}">
                                <div class="row padding-0 soruceNowDiv"
                                     ng-if="getActiveSourceNowTab('ShortlistedProducts')">
                                    <div class="col-lg-12 margin-b-10"
                                         ng-if="customer.selectShortList.length">
                                        <button type="button"
                                                class="btn btn-success float-r scroll-top"
                                                ng-click="saveSource()">Save selected product to quote</button>
                                    </div>
                                    <div class="col-md-12 DataCol"
                                         ng-if="customer.finalShortListedProduct && customer.finalShortListedProduct.length">
                                        <table class="table table-hover source_now_table">
                                            <tbody>
                                                <tr class="header-tr">
                                                    <td align="center"
                                                        class="greay-rc"> Product Features </td>
                                                    <td align="center"
                                                        class="greay-rc"
                                                        ng-repeat="list in customer.finalShortListedProduct"> Product {{$index + 1}} </td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Select Product </td>
                                                    <td height="35"
                                                        align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="product in customer.finalShortListedProduct">
                                                        <div class="checkbox checkbox-primary margin-t-0">
                                                            <input enter
                                                                   id="productID_{{$index}}"
                                                                   ng-model="product.isSelected"
                                                                   ng-true-value="true"
                                                                   ng-false-value="false"
                                                                   type="checkbox"
                                                                   ng-click="selecttoShortList(product)"
                                                                   ng-disabled="disabledCheck(product)">
                                                            <label for="productID_{{$index}}">Select Product {{$index + 1}} </label> {{product.ProductID}}
                                                            </div>
                                                        <!--                                                            <input id="productID_{{$index}}" ng-model="list.isSelected" ng-true-value="true" ng-false-value="false" type="checkbox" ng-click="selecttoShortList(list)" ng-disabled="selectShortList.length"><label for="productID_{{$index}}">Select Product {{$index + 1}} </label>-->
                                                    </td>
                                                </tr>
                                                <tr ng-show="customer.showLenderFinalSourcetoClient">
                                                    <td align="center">Lender Name</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.LenderName}}</td>
                                                </tr>
                                                <tr ng-show="customer.showLenderFinalSourcetoClient">
                                                    <td align="center">Product Name</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ProductName}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Product Type</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ProductType}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Term</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">
                                                        <span ng-if="list.Term">{{list.Term}}</span>
                                                        <span ng-if="!list.Term">-</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Initial Rate</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.LenderRate}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Reverting Rate</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.RevertionRate}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Initial Payment</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.InitialPayment}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Rev Payment</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.RevPayment}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Total Cost</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.TotalCost}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Incremental Cost</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct"> {{list.IncrementalCost}} </td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Total Fee</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.TotalFee}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">ERC</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ERC}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">ERC End Date</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ERCDate}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">ERC OverHang</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ERCOverHang}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">BookingFee</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.BookingFee}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Arrangement Fee</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ArrangementFee}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">HLC</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.HLC}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Valuation Fee</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ValuationFee}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Cashback</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.Cashback}}</td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Incentives</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">
                                                        <span ng-if="list.Incentives">{{list.Incentives}}</span>
                                                        <span ng-if="!list.Incentives">-</span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="center">Lending Criteria</td>
                                                    <td align="center"
                                                        height="35"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct"> {{list.LendingCriteria}}
                                                        <!--                                                            <p dd-text-collapse dd-text-collapse-max-length="67" dd-text-collapse-text="{{list.LendingCriteria| newline}}"></p>-->
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td class="bor bor-b">Affordability Features </td>
                                                    <td align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct"> {{list.AffordabilityFeatures}}
                                                        <!--                                                            <p dd-text-collapse dd-text-collapse-max-length="110" dd-text-collapse-text="{{list.AffordabilityFeatures| newline}}"></p>
                                                                                                                    </p>-->
                                                    </td>
                                                    <!--                                                        <td>&nbsp;</td> -->
                                                </tr>
                                                <!--                                                <tr>
                                                                                                    <td>Adverse </td>
                                                                                                    <td align="center" class="bor bor-b" ng-repeat="list in customer.finalShortListedProduct">
                                                                                                        {{list.Adverse}}
                                                                                                                                                                    <p dd-text-collapse dd-text-collapse-max-length="110" 
                                                                                                                                                                       dd-text-collapse-text="{{list.Adverse| newline}}"></p>
                                                                                                    </td>
                                                                                                                                                            <td>&nbsp;</td> 
                                                                                                </tr>-->
                                                <tr>
                                                    <td>Overpayment </td>
                                                    <td align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.Overpayments}} </td>
                                                    <!--                                                        <td>&nbsp;</td> -->
                                                </tr>
                                                <tr>
                                                    <td>CapitalRaised</td>
                                                    <td align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.CapitalRaised}} </td>
                                                    <!--                                                        <td>&nbsp;</td> -->
                                                </tr>
                                                <tr>
                                                    <td>Product ID</td>
                                                    <td align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="list in customer.finalShortListedProduct">{{list.ProductID}} </td>
                                                    <!--                                                        <td>&nbsp;</td> -->
                                                </tr>
                                                <tr>
                                                    <td class="noteHeadTD">Notes</td>
                                                    <td align="center"
                                                        class="bor bor-b"
                                                        ng-repeat="(key, list) in customer.finalShortListedProduct track by $index">
                                                        <textarea enter
                                                                  rows="3"
                                                                  ng-model="list.ProductIDNotes"
                                                                  style="display:block; width:100%; padding:10px;"
                                                                  class="textarea"
                                                                  ng-change="changeTextArea(key, 'ProductIDNotes')"></textarea> </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                    <div class="col-lg-1 col-lg-offset-5 margin-t-10"
                                         ng-if="customer.selectShortList.length">
                                        <button type="button"
                                                class="btn btn-success text-center scroll-top"
                                                ng-click="saveSource()">Save selected product to quote</button>
                                    </div>
                                </div>
                                <div class="row">
                                    <button type="button"
                                            class="btn scroll-top"
                                            ng-click="backButtonAction();">Back</button>
                                    <button type="button"
                                            class="btn btn-primary scroll-top"
                                            ng-click="nextButtonAction();">Next</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>